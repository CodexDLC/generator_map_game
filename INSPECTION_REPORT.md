# –û—Ç—á–µ—Ç –ø–æ –∏–Ω—Å–ø–µ–∫—Ü–∏–∏ –∫–æ–¥–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `editor`

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `editor`. –¶–µ–ª—å ‚Äî –≤—ã—è–≤–∏—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ —Å—Ç–∏–ª–µ –∫–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫, –∞ —Ç–∞–∫–∂–µ –Ω–∞–π—Ç–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–ª–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞.

## 1. `main_window.py`

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—á–µ—Ä–Ω–∏–º–∏ –≤–∏–¥–∂–µ—Ç–∞–º–∏.

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

*   **–ü–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `except Exception`**: –í–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `_build_central_v2`, `_setup_right_docks_v2`, `open_region_presets_window`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `except Exception:`.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ "–º–∞—Å–∫–∏—Ä—É–µ—Ç" –ª—é–±—ã–µ –æ—à–∏–±–∫–∏, –≤–∫–ª—é—á–∞—è `TypeError`, `AttributeError` –∏–ª–∏ `NameError`, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –í–º–µ—Å—Ç–æ –ø–∞–¥–µ–Ω–∏—è —Å –ø–æ–Ω—è—Ç–Ω–æ–π –æ—à–∏–±–∫–æ–π, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–ª—á–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ —Å –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–º –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º UI. –≠—Ç–æ —Å–∏–ª—å–Ω–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –æ—Ç–ª–∞–¥–∫—É.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ó–∞–º–µ–Ω–∏—Ç—å `except Exception:` –Ω–∞ –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–∂–∏–¥–∞—é—Ç—Å—è –≤ –¥–∞–Ω–Ω–æ–º –±–ª–æ–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `except ImportError:` –∏–ª–∏ `except AttributeError:`). –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–π–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ, –∏—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤ –∫–æ—Ä—Ç–µ–∂–µ: `except (ImportError, AttributeError):`.

### üü° –ó–∞–º–µ—á–∞–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏

*   **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –≤–∏–¥–∂–µ—Ç–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞**: –ú–µ—Ç–æ–¥ `_build_preview` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `__import__` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–∞ `Preview3DWidget`.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º, –æ–Ω —Ö—Ä—É–ø–∫–∏–π –∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –¥–ª—è IDE –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤. –ï—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è, —ç—Ç–æ—Ç –∫–æ–¥ –º–æ–∂–µ—Ç "–º–æ–ª—á–∞" —Å–ª–æ–º–∞—Ç—å—Å—è.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞: `from editor.preview_widget import Preview3DWidget`. –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤, –ª—É—á—à–µ –≤—ã–Ω–µ—Å—Ç–∏ —ç—Ç—É –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ–∞–±—Ä–∏—á–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Å –ø—Ä—è–º—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏.

*   **–ù–∞–ª–∏—á–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∫–æ–¥–∞ (V1)**: –í —Ñ–∞–π–ª–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ–ª–∞–≥ `LAYOUT_V2` –∏ –º–µ—Ç–æ–¥—ã `_build_central_v1`, `_setup_right_docks_v1`.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥ —É—Å–ª–æ–∂–Ω—è–µ—Ç —á—Ç–µ–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É. –ù–æ–≤—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –±—É–¥–µ—Ç –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –æ–Ω –∏ –¥–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ï—Å–ª–∏ —Ä–∞—Å–∫–ª–∞–¥–∫–∞ V1 –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –Ω–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é, –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–¥.

*   **–ù–µ–Ω–∞–¥–µ–∂–Ω—ã–π –ø–æ–∏—Å–∫ –∫–Ω–æ–ø–∫–∏ "Apply"**: –ú–µ—Ç–æ–¥ `_trigger_apply` –∏—â–µ—Ç –∫–Ω–æ–ø–∫—É —Å–Ω–∞—á–∞–ª–∞ –ø–æ `objectName`, –∞ –≤ —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–∏ ‚Äî –ø–æ —Ç–µ–∫—Å—Ç—É `"apply"`.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É ‚Äî –ø–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞. –¢–µ–∫—Å—Ç –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è, –±—ã—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ –¥—Ä—É–≥–æ–π —è–∑—ã–∫, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—Ç–∫–∞–∑—É —Ñ—É–Ω–∫—Ü–∏–∏.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –°–¥–µ–ª–∞—Ç—å `objectName` ("apply_button_right_outliner") –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –Ω–∞–¥–µ–∂–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –ø–æ–∏—Å–∫–∞. –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º –º–æ–¥—É–ª–µ, —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —ç—Ç–æ –∏–º—è –µ–π –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è.

### üîµ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–∏–ª—é

*   **–õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã**: –í –º–µ—Ç–æ–¥–∞—Ö `_resolve_global_noise_widget`, `open_region_presets_window`, `open_project_manager` –∏–º–ø–æ—Ä—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ñ–∞–π–ª–∞. –û–±—â–µ–ø—Ä–∏–Ω—è—Ç–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ (—Å–æ–≥–ª–∞—Å–Ω–æ PEP 8).
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤ –≤–µ—Ä—Ö–Ω—é—é —á–∞—Å—Ç—å —Ñ–∞–π–ª–∞.

*   **–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥**: –í `__init__` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤—ã–∑–æ–≤ `_setup_right_docks_v2()`.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –û—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã: –æ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π? –æ–Ω —É—Å—Ç–∞—Ä–µ–ª? –µ–≥–æ –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å?
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –£–¥–∞–ª–∏—Ç—å, –µ—Å–ª–∏ –æ–Ω –Ω–µ –Ω—É–∂–µ–Ω, –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –æ–±—ä—è—Å–Ω—è—é—â–∏–π, –ø–æ—á–µ–º—É –æ–Ω –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `# TODO: –ë—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏`).

## 2. `ui_panels/right_outliner.py`

–í–∏–¥–∂–µ—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏–π –∏–µ—Ä–∞—Ä—Ö–∏—é (outliner) –≤—Å–µ—Ö –Ω–æ–¥ –≤ –≥—Ä–∞—Ñ–µ. –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä —Å –≥—Ä–∞—Ñ–æ–º.

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

*   **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á–µ—Ç–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –≥—Ä–∞—Ñ–∞**: –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Ñ–∞–π–ª–∞. –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –≤ "–∑–∞—â–∏—Ç–Ω–æ–º" —Å—Ç–∏–ª–µ, –ø—ã—Ç–∞—è—Å—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±—ã–º –æ–±—ä–µ–∫—Ç–æ–º –≥—Ä–∞—Ñ–∞. –≠—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö `getattr` –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –∏ —Å–∏–≥–Ω–∞–ª–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏.
    *   **–ü—Ä–∏–º–µ—Ä—ã**: `getattr(g, "node_selection_changed", None) or getattr(g, "node_selected", None)`, `getattr(g, "get_node_by_id", None)`, `getattr(g, "select_nodes", None) or getattr(g, "set_selected_nodes", None)`.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –¢–∞–∫–æ–π –∫–æ–¥ –æ—á–µ–Ω—å —Ö—Ä—É–ø–∫–∏–π, –µ–≥–æ —Ç—Ä—É–¥–Ω–æ —á–∏—Ç–∞—Ç—å, –ø–æ–Ω–∏–º–∞—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä–∞–¥–∞–µ—Ç –∏–∑-–∑–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–π API –≥—Ä–∞—Ñ–∞ —è–≤–ª—è–µ—Ç—Å—è "–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º".
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é `typing.Protocol` –∏–ª–∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞), –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç –≥—Ä–∞—Ñ–∞. –≠—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–ª–∂–µ–Ω —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–µ—Ç–æ–¥—ã (`all_nodes`, `get_node_by_id`, `select_nodes`) –∏ —Å–∏–≥–Ω–∞–ª—ã (`selection_changed`, `node_renamed`, `graph_changed`). –í—Å–µ UI-–ø–∞–Ω–µ–ª–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –∞ –Ω–µ —É–≥–∞–¥—ã–≤–∞—Ç—å –∏–º–µ–Ω–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤.

*   **–ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `except Exception`**: –ö–∞–∫ –∏ –≤ `main_window.py`, –ø–æ—á—Ç–∏ –∫–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å –≥—Ä–∞—Ñ–æ–º –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ `try...except Exception:`, —á—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –£–¥–∞–ª–∏—Ç—å —ç—Ç–∏ –±–ª–æ–∫–∏. –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —á–µ—Ç–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –≥—Ä–∞—Ñ–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ –Ω–∏—Ö –æ—Ç–ø–∞–¥–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –≤—ã –±—É–¥–µ—Ç–µ —É–≤–µ—Ä–µ–Ω—ã –≤ –Ω–∞–ª–∏—á–∏–∏ –º–µ—Ç–æ–¥–æ–≤ –∏ —Å–∏–≥–Ω–∞–ª–æ–≤.

### üü° –ó–∞–º–µ—á–∞–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏

*   **–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `_select_node_in_graph`**: –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á: –ø–æ–∏—Å–∫ –Ω–æ–¥—ã (–Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏), –≤—ã–¥–µ–ª–µ–Ω–∏–µ (–Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏), —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –≤–∏–¥–∂–µ—Ç–æ–≤ –∏ —ç–º—É–ª—è—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (Single Responsibility Principle). –ú–µ—Ç–æ–¥ —Å–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –†–∞–∑–±–∏—Ç—å –µ–≥–æ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–±–æ–ª—å—à–∏—Ö, —á–µ—Ç–∫–æ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤: `_find_node_in_graph(node_id)`, `_set_graph_selection(node)`, `_center_view_on_node(node)`.

*   **–ò–∑–±—ã—Ç–æ—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ `set_busy`**: –í—ã—Ä–∞–∂–µ–Ω–∏–µ `busy if False else not busy` –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–Ω–æ `not busy`.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∑–∞–ø—É—Ç–∞—Ç—å.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –£–ø—Ä–æ—Å—Ç–∏—Ç—å –¥–æ `self.apply_button.setEnabled(not busy)`.

### üîµ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–∏–ª—é

*   **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∏–≥–Ω–∞—Ç—É—Ä –≤ `_on_node_name_changed`**: –ú–µ—Ç–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è —É–≥–∞–¥–∞—Ç—å, –∫–∞–∫–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –µ–º—É –ø–µ—Ä–µ–¥–∞–ª —Å–∏–≥–Ω–∞–ª. –≠—Ç–æ –ø—Ä—è–º–æ–µ —Å–ª–µ–¥—Å—Ç–≤–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≥—Ä–∞—Ñ–∞.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü–æ—Å–ª–µ –≤–≤–µ–¥–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —É —Å–∏–≥–Ω–∞–ª–∞ `node_renamed` –±—É–¥–µ—Ç —Å—Ç—Ä–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `(node, new_name)`), –∏ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å.

*   **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ `_on_tree_item_changed`**: –ö –æ–¥–Ω–æ–º—É —Å–ª–æ—Ç—É –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è —Ç—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–∞ –¥–µ—Ä–µ–≤–∞ (`currentItemChanged`, `itemActivated`, `itemClicked`).
    *   **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π**: –•–æ—Ç—è —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ —Ç—Ä–∏ —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –æ–¥–Ω–æ–º—É –¥–µ–π—Å—Ç–≤–∏—é ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—ã–±–æ—Ä–∞. –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å, –Ω–æ —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å –æ —Ç–∞–∫–æ–π —Å–≤—è–∑–∏ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ.

## 3. `ui_panels/properties_panel.py`

–§–∞–±—Ä–∏—á–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞ —Å–≤–æ–π—Å—Ç–≤ –∏ –µ–≥–æ –¥–æ–∫-–æ–±–µ—Ä—Ç–∫–∏.

### üü° –ó–∞–º–µ—á–∞–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏

*   **–§—É–Ω–∫—Ü–∏–∏ —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏**: –§—É–Ω–∫—Ü–∏–∏ `make_properties_widget` –∏ `create_properties_dock` –Ω–µ —Ç–æ–ª—å–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –≤–∏–¥–∂–µ—Ç, –Ω–æ –∏ –∏–∑–º–µ–Ω—è—é—Ç –æ–±—ä–µ–∫—Ç `main_window`, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –Ω–∞ –Ω–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã (`props_bin`, `dock_props`).
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –º–µ–Ω–µ–µ –æ—á–µ–≤–∏–¥–Ω—ã–º. –§—É–Ω–∫—Ü–∏—è —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `make_` –∏–ª–∏ `create_` –Ω–µ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —Ç–∞–∫–∏—Ö –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤. `MainWindow` –¥–æ–ª–∂–µ–Ω —Å–∞–º –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò–∑–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ –≤–∏–¥–∂–µ—Ç. –ö–æ–¥ –≤ `MainWindow` –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫: `self.props_bin = make_properties_widget(self)`.

*   **–£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ (V1)**: –§—É–Ω–∫—Ü–∏—è `create_properties_dock` –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ —Å–ª–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å—Ç–∞—Ä–æ–π —Ä–∞—Å–∫–ª–∞–¥–∫–∏.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –£—Å–ª–æ–∂–Ω—è–µ—Ç –∫–æ–¥–æ–≤—É—é –±–∞–∑—É.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ï—Å–ª–∏ —Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ–∫–æ–≤ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–∞, —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤—ã–∑—ã–≤–∞—Ç—å `make_properties_widget` –Ω–∞–ø—Ä—è–º—É—é —Ç–∞–º, –≥–¥–µ —ç—Ç–æ –±—ã–ª–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

### üîµ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–∏–ª—é

*   **–ù–µ–æ—á–µ–≤–∏–¥–Ω–∞—è —Ä–æ–ª—å —Ñ–∞–π–ª–∞**: –§–∞–π–ª —è–≤–ª—è–µ—Ç—Å—è "—Ñ–∞–±—Ä–∏–∫–æ–π" –¥–ª—è –≤–∏–¥–∂–µ—Ç–∞ `AccordionProperties`, –∫–æ—Ç–æ—Ä—ã–π –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ –¥—Ä—É–≥–æ–≥–æ –º–æ–¥—É–ª—è. 
    *   **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π**: –≠—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞, –∞ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –û–¥–Ω–∞–∫–æ —ç—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π –∫–æ—Å–≤–µ–Ω–Ω–æ—Å—Ç–∏. –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∫–æ–¥–∞ —Å `accordion_properties.py` –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å –≤—Å–µ—Ö –ø–æ–¥–æ–±–Ω—ã—Ö —Ñ–∞–±—Ä–∏–∫ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π `ui_factory.py` –º–æ–¥—É–ª—å, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π.

*   **–ó–∞—â–∏—Ç–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–æ–¥ `if getattr(main_window, "graph", None): props.set_graph(main_window.graph)` —è–≤–ª—è–µ—Ç—Å—è –µ—â–µ –æ–¥–Ω–∏–º —Å–∏–º–ø—Ç–æ–º–æ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —á–µ—Ç–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –º–µ–∂–¥—É UI-–ø–∞–Ω–µ–ª—è–º–∏ –∏ `MainWindow`.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ `MainWindow` –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≥—Ä–∞—Ñ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤–∏–¥–∂–µ—Ç–∞ —Å–≤–æ–π—Å—Ç–≤ –∏–ª–∏ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥, —á—Ç–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ `getattr`.

## 4. `ui_panels/accordion_properties.py`

–û—Å–Ω–æ–≤–Ω–æ–π –≤–∏–¥–∂–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç UI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –Ω–æ–¥—ã.

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

*   **–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è UI –≤ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–æ–¥–µ)**: –≠—Ç–æ —Å–∞–º–∞—è —Å–µ—Ä—å–µ–∑–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ñ–∞–π–ª–µ. –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è `group()` –≤ –º–µ—Ç–æ–¥–µ `_rebuild()` —Å–æ–∑–¥–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å UI (–Ω–∞–ø—Ä–∏–º–µ—Ä, `grp_Params__enabled`), –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –æ–±—ä–µ–∫—Ç–µ –Ω–æ–¥—ã.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ –≥—Ä—É–±–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SoC). –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö (–Ω–æ–¥–∞) –Ω–µ –¥–æ–ª–∂–Ω–∞ –Ω–∏—á–µ–≥–æ –∑–Ω–∞—Ç—å –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–≤–µ—Ä–Ω—É—Ç–∞ –ª–∏ –ø–∞–Ω–µ–ª—å —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–æ–¥—ã "–≥—Ä—è–∑–Ω—ã–º–∏", –∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ UI ‚Äî –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º. –°–æ—Å—Ç–æ—è–Ω–∏–µ UI (—Å–≤–µ—Ä–Ω—É—Ç–æ/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ, –≤–∫–ª—é—á–µ–Ω–æ/–≤—ã–∫–ª—é—á–µ–Ω–æ) –¥–æ–ª–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–∏—Ö UI-–≤–∏–¥–∂–µ—Ç–æ–≤ (`CollapsibleBox`). –ï—Å–ª–∏ —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏, –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∞—Å—Ç—å—é —Å–µ—Å—Å–∏–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞, –∞ –Ω–µ —á–∞—Å—Ç—å—é –≥—Ä–∞—Ñ–∞.

*   **–°–≤–µ—Ä—Ö–∑–∞—â–∏—Ç–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏**: –ú–µ—Ç–æ–¥ `_rebuild` –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω –±–ª–æ–∫–∞–º–∏ `try...except Exception:`, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `get_property`, `set_property` –∏ `add_property` —É –Ω–æ–¥—ã. –ö–æ–¥ –¥–∞–∂–µ –ø—ã—Ç–∞–µ—Ç—Å—è *–¥–æ–±–∞–≤–∏—Ç—å* —Å–≤–æ–π—Å—Ç–≤–æ, –µ—Å–ª–∏ –µ–≥–æ —á—Ç–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –ª–æ–≥–∏–∫—É –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ—á–∏—Ç–∞–µ–º–æ–π –∏ —Å–∫—Ä—ã–≤–∞–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ API –Ω–æ–¥—ã. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–∞–¥–∞—Ç—å —Å –æ—à–∏–±–∫–æ–π "—É –Ω–æ–¥—ã –Ω–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞ X", –∫–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–æ–≥–∏–π API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –Ω–æ–¥—ã. –ú–µ—Ç–æ–¥—ã `get_property` –∏ `set_property` –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–∞–¥–∞—Ç—å, –µ—Å–ª–∏ —Å–≤–æ–π—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, –¥–æ–ª–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è `None` –∏–ª–∏ –≤–æ–∑–±—É–∂–¥–∞—Ç—å—Å—è `KeyError`, –Ω–æ –Ω–µ `Exception`. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ `try/except` –æ—Ç–ø–∞–¥–µ—Ç.

### üü° –ó–∞–º–µ—á–∞–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏

*   **–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `_rebuild`**: –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –æ–≥—Ä–æ–º–µ–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—Å–µ: –æ—á–∏—Å—Ç–∫—É UI, —á—Ç–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≥—Ä—É–ø–ø, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤. 
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ—Ç–æ–¥ –Ω–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –µ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –†–∞–∑–±–∏—Ç—å –º–µ—Ç–æ–¥ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä:
        *   `_clear_layout()`
        *   `_build_ui_for_node(node)`
        *   `_create_group_box(name, is_expanded)`
        *   `_create_widget_for_property(prop_name, prop_meta)` (—Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è `QLineEdit`, `QSpinBox` –∏ —Ç.–¥.)

*   **–ù–µ—á–µ—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å –≥—Ä–∞—Ñ–æ–º**: –ö–∞–∫ –∏ –≤ –¥—Ä—É–≥–∏—Ö –≤–∏–¥–∂–µ—Ç–∞—Ö, `set_graph` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getattr` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–∏–≥–Ω–∞–ª–∞–º `node_selection_changed` –∏–ª–∏ `node_selected`.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π, —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å–∏–≥–Ω–∞–ª –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≥—Ä–∞—Ñ–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, `selection_changed`.

### üîµ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–∏–ª—é

*   **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `lambda` –≤ —Ü–∏–∫–ª–∞—Ö**: –•–æ—Ç—è `lambda` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –∑–∞—Ö–≤–∞—Ç–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (`nn=name, ww=w`), –∏—Ö –æ–±–∏–ª–∏–µ –≤ —Ü–∏–∫–ª–µ `_rebuild` –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –æ—á–µ–Ω—å –ø–ª–æ—Ç–Ω—ã–º –∏ —Ç—Ä—É–¥–Ω—ã–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏. 
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `functools.partial` –∏–ª–∏ –≤—ã–Ω–µ—Å–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å.

## 5. `ui_panels/central_graph.py`

–§–∞–±—Ä–∏—á–Ω—ã–π –º–æ–¥—É–ª—å, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∫–æ–º–ø–æ–Ω–æ–≤–∫—É —Ä–∞–±–æ—á–µ–π –æ–±–ª–∞—Å—Ç–∏ —Å –Ω–æ–¥–æ–≤—ã–º –≥—Ä–∞—Ñ–æ–º.

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

*   **–§—É–Ω–∫—Ü–∏—è —Å —á—Ä–µ–∑–º–µ—Ä–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é**: –§—É–Ω–∫—Ü–∏—è `create_bottom_work_area_v2` —è–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–º–µ—Ä–æ–º "–±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞" –≤ –º–∏–Ω–∏–∞—Ç—é—Ä–µ. –û–Ω–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –≤–∏–¥–∂–µ—Ç, –∞ –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –¥—Ä—É–≥–∏–º —á–∞—Å—Ç—è–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –°–º–µ—à–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ UI, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º `MainWindow`, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Drag&Drop) –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –ø–æ–¥–¥–∞—é—â–∏–º—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é. 
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–≤–µ—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–≤ (`CustomNodeGraph`, `NodesPaletteWidget`, `RightOutlinerWidget`) –∏ –∏—Ö —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤ `QSplitter`. –í—Å—é –æ—Å—Ç–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É —Å–ª–µ–¥—É–µ—Ç –≤—ã–Ω–µ—Å—Ç–∏:
        *   –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `_saved_left_sizes`) –∏ –º–µ—Ç–æ–¥—ã (`toggle_left_palette`) ‚Äî –≤ `MainWindow`.
        *   –û–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –≥—Ä–∞—Ñ–∞ (–ü–ö–ú-–º–µ–Ω—é, D&D, —É–¥–∞–ª–µ–Ω–∏–µ) ‚Äî –≤ –∫–ª–∞—Å—Å `CustomNodeGraph`.
        *   –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ —Å–ª–æ—Ç–æ–≤ ‚Äî –≤ `MainWindow`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≤ —Ä–æ–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞.

*   **–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `MainWindow` –ø–æ —Å—Å—ã–ª–∫–µ**: –§—É–Ω–∫—Ü–∏—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `mw`, –¥–æ–±–∞–≤–ª—è—è –µ–º—É –∞—Ç—Ä–∏–±—É—Ç—ã (`mw.graph`, `mw.toggle_left_palette`) –∏ —Å–æ—Ö—Ä–∞–Ω—è—è –≤ –Ω–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ. 
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ –≥—Ä—É–±–æ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –∏ –¥–µ–ª–∞–µ—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—è–≤–Ω—ã–º. `MainWindow` –¥–æ–ª–∂–µ–Ω —Å–∞–º —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ —á–ª–µ–Ω–∞–º–∏.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç (—Å–ø–ª–∏—Ç—Ç–µ—Ä), –∞ `MainWindow` —É–∂–µ —Å–∞–º —Ä–µ—à–∏—Ç, —á—Ç–æ —Å –Ω–∏–º –¥–µ–ª–∞—Ç—å. –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ `MainWindow`.

### üü° –ó–∞–º–µ—á–∞–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏

*   **–£–≥–∞–¥—ã–≤–∞–Ω–∏–µ API –≥—Ä–∞—Ñ–∞ –∏ `MainWindow`**: –ö–æ–¥ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getattr` –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ —Å–∏–≥–Ω–∞–ª–æ–≤.
    *   **–ü—Ä–∏–º–µ—Ä—ã**: –ü–æ–∏—Å–∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ `apply_clicked` (`getattr(mw, "on_generate_world", None)`), –ø–µ—Ä–µ–±–æ—Ä –∏–º–µ–Ω —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è `_mark_dirty`, –¥–≤–æ–π–Ω–æ–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –Ω–æ–¥ –≤ `_iter_registered`.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –í–≤–µ—Å—Ç–∏ —á–µ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. `MainWindow` –¥–æ–ª–∂–µ–Ω —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ –∫–æ–ª–±—ç–∫–∏, –∞ –≥—Ä–∞—Ñ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å—Ç—Ä–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏ —Å–∏–≥–Ω–∞–ª—ã.

*   **–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–ª–∞—Å—Å—ã**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `_DnDDropFilter`, `_open_ctx_menu` –∏ –¥—Ä—É–≥–∏—Ö –ø–æ–º–æ—â–Ω–∏–∫–æ–≤ –≤–Ω—É—Ç—Ä–∏ `create_bottom_work_area_v2` –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç —á—Ç–µ–Ω–∏–µ.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –í—ã–Ω–µ—Å—Ç–∏ –∏—Ö –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –º–æ–¥—É–ª—è. –õ–æ–≥–∏–∫—É D&D –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é –ª—É—á—à–µ –≤—Å–µ–≥–æ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ `CustomNodeGraph`.

*   **–£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ (V1)**: –ù–∞–ª–∏—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `setup_central_graph_ui` –¥–ª—è —Å—Ç–∞—Ä–æ–π –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –£–¥–∞–ª–∏—Ç—å, –µ—Å–ª–∏ V1 –±–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

## 6. `ui_panels/nodes_palette_panel.py`

–í–∏–¥–∂–µ—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–¥.

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

*   **–ù–µ–Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –Ω–æ–¥**: –ú–µ—Ç–æ–¥ `_iter_registered` ‚Äî —ç—Ç–æ —Å–∞–º—ã–π —è—Ä–∫–∏–π –ø—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã "—É–≥–∞–¥—ã–≤–∞–Ω–∏—è API". –û–Ω –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–æ–¥ —Ç—Ä–µ–º—è —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏, –≤–∫–ª—é—á–∞—è –ø–µ—Ä–µ—Ö–≤–∞—Ç –≤—Å–µ—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —Ö—Ä—É–ø–∫–∏–º, –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∏ —Å–ª–æ–∂–Ω—ã–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏. –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–æ–π –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π, –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è —Å–ø–∏—Å–∫–∞ –Ω–æ–¥. –°—É–¥—è –ø–æ –∫–æ–¥—É, –ª—É—á—à–∏–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è `node_registry.iter_registered_nodes()`. –ü–∞–ª–∏—Ç—Ä–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å –Ω–∏–º, –∞ –≤—Å–µ –Ω–æ–¥—ã –¥–æ–ª–∂–Ω—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —ç—Ç–æ—Ç —Ä–µ–µ—Å—Ç—Ä.

### üü° –ó–∞–º–µ—á–∞–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏

*   **–ñ–µ—Å—Ç–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `MainWindow`**: –í–∏–¥–∂–µ—Ç –ø–æ–ª—É—á–∞–µ—Ç `main_window` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ, —á—Ç–æ–±—ã –∑–∞—Ç–µ–º —á–µ—Ä–µ–∑ `getattr` –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –≥—Ä–∞—Ñ–∞ (`self._mw.graph`).
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∏–¥–∂–µ—Ç –Ω–µ—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–º –∏ —Ç–µ—Å–Ω–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç –µ–≥–æ —Å `MainWindow`, —Ö–æ—Ç—è –µ–º—É –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –≥—Ä–∞—Ñ. 
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç –≥—Ä–∞—Ñ–∞ –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤–∏–¥–∂–µ—Ç–∞: `__init__(self, graph, ...)`. –≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —è–≤–Ω–æ–π –∏ –ø–æ–∑–≤–æ–ª–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–ª–∏—Ç—Ä—É –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö.

### üîµ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–∏–ª—é

*   **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –±–∞–≥ / –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥**: –í `__init__` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä–æ–∫–∞ `self._list.node_activated.connect(self._spawn_in_graph)`.
    *   **–ü—Ä–æ–±–ª–µ–º–∞**: –°—É–¥—è –ø–æ –≤—Å–µ–º—É, —ç—Ç–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤–∏–¥–∂–µ—Ç–∞ ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–¥—ã –ø–æ –¥–≤–æ–π–Ω–æ–º—É –∫–ª–∏–∫—É –∏–ª–∏ –Ω–∞–∂–∞—Ç–∏—é Enter. –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ —Ç–∞–∫, —Ç–æ –∫–æ–¥ —è–≤–ª—è–µ—Ç—Å—è "–º–µ—Ä—Ç–≤—ã–º" –∏ –≤–≤–æ–¥–∏—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ.
    *   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É, —á—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –ï—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ, –¥–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, –ø–æ—á–µ–º—É.

*   **Drag & Drop**: –ö–æ–¥ –¥–ª—è Drag & Drop —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `_PaletteList`, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º. –≠—Ç–æ —Ö–æ—Ä–æ—à–∏–π, —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ–±—Ä–∞–∑–µ—Ü –¥–ª—è –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## 7. –û–±—â–∏–µ –≤—ã–≤–æ–¥—ã –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `editor` –≤—ã—è–≤–∏–ª —Ä—è–¥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª —Å —É—á–∞—Å—Ç–∏–µ–º —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (–∏–ª–∏ –ò–ò) —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏.

**–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á–µ—Ç–∫–∏—Ö "–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤" (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤) –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.**

–≠—Ç–æ –ø–æ—Ä–æ–∂–¥–∞–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã: "–∑–∞—â–∏—Ç–Ω–æ–µ" –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å `getattr` –∏ `try/except Exception`, —Å–º–µ—à–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –æ—Ç–ª–∞–¥–∫–æ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π.

### –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å –ø–æ—ç—Ç–∞–ø–Ω–æ, –¥–≤–∏–≥–∞—è—Å—å –æ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é UI.

**–®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)**

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, `editor/graph_api.py`. –í –Ω–µ–º —Å –ø–æ–º–æ—â—å—é `typing.Protocol` –∏–ª–∏ `abc.ABC` –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–∞–∫ –¥–æ–ª–∂–Ω—ã –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–∞—à–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏. –≠—Ç–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —à–∞–≥.

*   **`NodeAPI` (–ü—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –Ω–æ–¥—ã):**
    *   `id: str`
    *   `name() -> str`
    *   `set_name(new_name: str)`
    *   `get_property(prop_name: str) -> Any`
    *   `set_property(prop_name: str, value: Any)`
    *   `properties_meta() -> Dict[str, Dict]` (–æ–ø–∏—Å–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –¥–ª—è UI)

*   **`GraphAPI` (–ü—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –≥—Ä–∞—Ñ–∞):**
    *   `all_nodes() -> List[NodeAPI]`
    *   `selected_nodes() -> List[NodeAPI]`
    *   `select_nodes(nodes: List[NodeAPI])`
    *   `get_node_by_id(node_id: str) -> Optional[NodeAPI]`
    *   `create_node(...)`
    *   `delete_nodes(...)`
    *   **–°–∏–≥–Ω–∞–ª—ã (–¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞):**
        *   `selection_changed = Signal(list)`
        *   `node_renamed = Signal(object, str)`
        *   `graph_changed = Signal()` (–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –Ω–æ–¥ –∏ —Å–≤—è–∑–µ–π)

**–®–∞–≥ 2: –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `CustomNodeGraph` –∏ –±–∞–∑–æ–≤—É—é –Ω–æ–¥—É**

*   –£–Ω–∞—Å–ª–µ–¥—É–π—Ç–µ –≤–∞—à–∏ –∫–ª–∞—Å—Å—ã `CustomNodeGraph` –∏ `BaseNode` –æ—Ç —ç—Ç–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤/–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤.
*   –†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã –∏ —Å–∏–≥–Ω–∞–ª—ã —Å —á–µ—Ç–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏. –í–µ—Å—å "–∑–æ–æ–ø–∞—Ä–∫" –≤—Ä–æ–¥–µ `node_selected` / `node_selection_changed` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –æ–¥–∏–Ω —Å–∏–≥–Ω–∞–ª `selection_changed`.

**–®–∞–≥ 3: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UI-–ø–∞–Ω–µ–ª–µ–π**

*   –û–±–Ω–æ–≤–∏—Ç–µ `right_outliner.py`, `accordion_properties.py` –∏ –¥—Ä—É–≥–∏–µ –ø–∞–Ω–µ–ª–∏.
*   –í–µ–∑–¥–µ, –≥–¥–µ –≤–∏–¥–∂–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≥—Ä–∞—Ñ–æ–º –∏–ª–∏ –Ω–æ–¥–æ–π, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö —Ç–∏–ø–æ–≤ `GraphAPI` –∏ `NodeAPI`.
*   **–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç–µ `getattr`, `hasattr` –∏ `try/except Exception`** –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å API –≥—Ä–∞—Ñ–∞/–Ω–æ–¥—ã. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏ —Å–∏–≥–Ω–∞–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç.
*   **–í—ã–Ω–µ—Å–∏—Ç–µ –ª–æ–≥–∏–∫—É –∏–∑ `accordion_properties.py`**: –ü–µ—Ä–µ—Å—Ç–∞–Ω—å—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ UI –≤ –Ω–æ–¥–∞—Ö. –°–æ—Å—Ç–æ—è–Ω–∏–µ (—Å–≤–µ—Ä–Ω—É—Ç–∞/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –≥—Ä—É–ø–ø–∞) –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é `CollapsibleBox`.
*   **–£–ø—Ä–æ—Å—Ç–∏—Ç–µ `nodes_palette_panel.py`**: –ó–∞—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å –æ–¥–Ω–∏–º —Ä–µ–µ—Å—Ç—Ä–æ–º –Ω–æ–¥.

**–®–∞–≥ 4: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `MainWindow` –∏ —Ñ–∞–±—Ä–∏–∫**

*   –£–±–µ—Ä–∏—Ç–µ –∏–∑ —Ñ–∞–±—Ä–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (`central_graph.py`) –≤—Å—é –ª–æ–≥–∏–∫—É, –∫—Ä–æ–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏ –≤–∏–¥–∂–µ—Ç–æ–≤.
*   `MainWindow` –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å "–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–æ–º": –æ–Ω —Å–æ–∑–¥–∞–µ—Ç –ø–∞–Ω–µ–ª–∏, –ø–µ—Ä–µ–¥–∞–µ—Ç –∏–º —Å—Å—ã–ª–∫—É –Ω–∞ –≥—Ä–∞—Ñ –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç –∏—Ö —Å–∏–≥–Ω–∞–ª—ã –∏ —Å–ª–æ—Ç—ã. –û–Ω –±–æ–ª—å—à–µ –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω—è—Ç—å—Å—è –∏–∑–≤–Ω–µ.

**–®–∞–≥ 5: –û—á–∏—Å—Ç–∫–∞**

*   –£–¥–∞–ª–∏—Ç–µ –≤–µ—Å—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ (V1).
*   –£–¥–∞–ª–∏—Ç–µ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç–µ –∏—Ö –≤ `TODO` –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.
*   –ü—Ä–æ–≤–µ–¥–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é `black` –∏ `isort` –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è.

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç —Ö—Ä—É–ø–∫–∏–π, "–∑–∞—â–∏—Ç–Ω—ã–π" –∫–æ–¥ –≤ –Ω–∞–¥–µ–∂–Ω—É—é, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—É—é –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é —Å–∏—Å—Ç–µ–º—É, —Å –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –ø—Ä–∏—è—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å.
